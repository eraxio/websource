webpackJsonp([9],{"B3w+":function(e,t){},EuJO:function(e,t){},kJkZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("pXgp"),i=s("Pgpu"),r=s.n(i),o=s("NYxO"),n=s("qsok"),l=s("WnJJ"),c=s("vOav"),m=s("JrLM"),u=s("TIfe"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function a(i,r){try{var o=t[i](r),n=o.value}catch(e){return void s(e)}if(!o.done)return Promise.resolve(n).then(function(e){a("next",e)},function(e){a("throw",e)});e(n)}("next")})}}var d={name:"collectionEdit",components:{VueUeditorWrap:r.a,IMedia:n.a,ElUploader:l.a,collectionSuccess:c.a},data:function(){return{fileUrl:a.a,isShow:!1,rules:this.getRules(),tagTemp:"",tagList:[],form:{},isloading:!1,dialogSuccess:!1,switchRoyalties:!1,propertiesVisible:!1,propertiestemp:[],properties:[],myConfig:this.$store.state.app.ueditorConfig}},computed:f({},Object(o.b)(["token","userInfo"])),watch:{"form.iCreatorRoyalties":{handler:function(e){e&&(e>10&&(e="10"),e=e.match(/^\d*(\.?\d{0,2})/g)[0]||null,this.$set(this.form,"iCreatorRoyalties",e))}}},mounted:function(){this.getItemDetails()},methods:{showProperty:function(){var e=this;this.form.sProperties&&(this.propertiestemp=JSON.parse(JSON.stringify(this.form.sProperties))),this.$nextTick(function(){e.propertiesVisible=!0})},onSave:function(){this.form.sProperties=this.propertiestemp,this.propertiesVisible=!1},deleteProperty:function(e){this.propertiestemp.splice(e,1)},addProperty:function(){this.propertiestemp.push({traitType:"",value:""})},getRules:function(){return{sDataUrl:[{required:!0,message:this.$t("message.Collection_14"),trigger:["blur","change"]}],sName:[{required:!0,message:this.$t("message.Collection_13"),trigger:"blur"}],sDescription:[{required:!0,message:this.$t("message.Collection_13"),trigger:["blur","change"]}]}},handleSuccess:function(e){this.$set(this.form,"sDataUrl",e)},handleRemove:function(){this.$set(this.form,"sDataUrl","")},getItemDetails:function(){var e=this;return p(regeneratorRuntime.mark(function t(){var s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$route.query.iItemId){t.next=3;break}return e.isShow=!0,t.abrupt("return");case 3:return s={iUserId:1002,iCollectionId:+e.$route.query.iCollectionId,iItemId:+e.$route.query.iItemId,sWallet:e.token},t.next=6,e.$api.GetItemInfo(s);case 6:a=t.sent,e.form=f({},a,a.stItem),e.form.sProperties=JSON.parse(e.form.sProperties),e.tagList=a.stItem.vLabels.map(function(e){return e.stLabel}),e.isShow=!0;case 11:case"end":return t.stop()}},t,e)}))()},handleCreate:function(){var e=this;return p(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.switchRoyalties){t.next=3;break}if(parseFloat(e.form.iCreatorRoyalties)){t.next=3;break}return t.abrupt("return");case 3:return e.isloading=!0,t.next=6,Object(m.a)();case 6:if(e.userInfo.iUserId){t.next=9;break}return t.next=9,u.a.GetUserInfo();case 9:e.$refs.form.validate(function(){var t=p(regeneratorRuntime.mark(function t(s){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=6;break}return(a=f({iUserId:e.userInfo.iUserId,iCollectionId:+e.$route.query.iCollectionId,sWallet:e.token},e.form,{vLabels:e.tagList.map(function(e){return{stLabel:e}})})).iRoyaltiesFlag=e.switchRoyalties?1:0,a.sProperties=JSON.stringify(a.sProperties),t.next=6,e.$api.CreateItem(a).then(function(t){e.form=f({},e.form,t),e.dialogSuccess=!0}).catch().finally(function(){e.isloading=!1});case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return t.stop()}},t,e)}))()},handleReEdit:function(){var e=this;return p(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,t.next=3,Object(m.a)();case 3:e.$refs.form.validate(function(){var t=p(regeneratorRuntime.mark(function t(s){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=8;break}return(a=f({sWallet:e.token},e.form,{vLabels:e.tagList.map(function(e){return{stLabel:e}})})).sProperties=JSON.stringify(a.sProperties),t.next=5,e.$api.EditItem(a).then(function(e){}).catch().finally(function(){e.isloading=!1});case 5:t.sent,e.$message({type:"success",message:e.$t("message.Collection_15")}),e.$router.go(-1);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t,e)}))()},handleDelete:function(){var e=this;return p(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.a)();case 2:e.$confirm(e.$t("message.Collection_20"),e.$t("message.Collection_18"),{confirmButtonText:e.$t("message.Collection_19"),cancelButtonText:e.$t("message.assets_lang_11"),type:"warning"}).then(p(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.DeleteItem({iItemId:e.form.iItemId,iCollectionId:e.form.iCollectionId,sWallet:e.token}).then(function(t){e.$message({type:"success",message:e.$t("message.Collection_21")}),e.$router.replace({name:"collection",query:{iCollectionId:e.form.iCollectionId}}),e.$emit("input",!1)}).catch(function(t){-4116===t.iRspCode&&e.$message.error(e.$t("message.Collection_23"))});case 2:case"end":return t.stop()}},t,e)})));case 3:case"end":return t.stop()}},t,e)}))()},handleLabelAdd:function(){this.tagTemp?this.tagTemp.replace(/[^\x00-\xff]/g,"01").length>16?this.$message.error("标签信息长度8个汉字或16个字符"):(this.tagList.push(this.tagTemp),this.tagTemp=""):this.$message.error(this.$t("message.Collection_12")+this.$t("message.Collection_13"))},handleRemoveTag:function(e){this.$delete(this.tagList,e)}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-edit"},[a("div",{staticClass:"erax-page-header"},[a("div",{staticClass:"erax-page-layout"},[a("a",{staticClass:"erax-back",on:{click:function(t){return e.$router.go(-1)}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" "+e._s(e.$t("message.Other_32")))])])]),e._v(" "),e.isShow?a("div",{staticClass:"form-page-box"},[a("div",{staticClass:"header"},[a("h1",{staticClass:"header-title"},[e._v(e._s(e.form.iItemId?e.$t("message.Other_33"):e.$t("message.Other_22")))])]),e._v(" "),a("el-form",{ref:"form",staticClass:"edit-form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{staticClass:"form-item",attrs:{prop:"sDataUrl"}},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_07"))+" *")]),e._v(" "),a("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_01")))])]),e._v(" "),a("ElUploader",{attrs:{accept:"*",imgUrl:e.form.sDataUrl,onSuccess:e.handleSuccess,onRemove:e.handleRemove}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{prop:"sName"}},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_23"))+" *")])]),e._v(" "),a("el-input",{attrs:{placeholder:e.$t("message.Collection_09"),maxlength:64},model:{value:e.form.sName,callback:function(t){e.$set(e.form,"sName",t)},expression:"form.sName"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_08")))])]),e._v(" "),a("el-input",{attrs:{placeholder:e.$t("message.Collection_10"),maxlength:120},model:{value:e.form.sArtist,callback:function(t){e.$set(e.form,"sArtist",t)},expression:"form.sArtist"}})],1),e._v(" "),e.form.iItemId?e._e():a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.assets_lang_150")))])]),e._v(" "),a("div",{staticClass:"royalties-container"},[a("div",{staticClass:"royalties"},[a("el-input",{staticClass:"royalties-input",attrs:{maxlength:200,type:"number",disabled:!e.switchRoyalties},model:{value:e.form.iCreatorRoyalties,callback:function(t){e.$set(e.form,"iCreatorRoyalties",t)},expression:"form.iCreatorRoyalties"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("div",{staticClass:"royalties-desc"},[e._v(e._s(e.form.iCreatorRoyalties)+e._s(e.$t("message.assets_lang_151")))])],1),e._v(" "),a("el-switch",{attrs:{"active-color":"#772EFF","inactive-color":"#919EAB"},model:{value:e.switchRoyalties,callback:function(t){e.switchRoyalties=t},expression:"switchRoyalties"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_09")))]),e._v(" "),a("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_10")))])]),e._v(" "),a("el-input",{attrs:{placeholder:e.$t("message.Collection_11"),maxlength:200},model:{value:e.form.sExternalLink,callback:function(t){e.$set(e.form,"sExternalLink",t)},expression:"form.sExternalLink"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_11")))]),e._v(" "),a("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_12")))])]),e._v(" "),a("div",{staticClass:"label-item tag-box"},[e.tagList.length<4?a("el-input",{staticClass:"add-label-input tag-item",attrs:{placeholder:e.$t("message.Collection_12"),maxlength:20},model:{value:e.tagTemp,callback:function(t){e.tagTemp=t},expression:"tagTemp"}},[a("i",{staticClass:"el-input__icon el-icon-plus icon-label",attrs:{slot:"suffix"},on:{click:e.handleLabelAdd},slot:"suffix"})]):e._e(),e._v(" "),e._l(e.tagList,function(t,s){return a("div",{key:s,staticClass:"tag-item"},[a("el-tag",{staticClass:"label-tag",attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return e.handleRemoveTag(s)}}},[e._v(e._s(t)+"\n            ")])],1)})],2)]),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.assets_lang_152")))])]),e._v(" "),a("div",{staticClass:"Properties-container"},[a("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.assets_lang_153")))]),e._v(" "),a("img",{attrs:{src:s("Zarb"),alt:""},on:{click:e.showProperty}})]),e._v(" "),e.form.sProperties&&e.form.sProperties.length?e._e():a("el-divider"),e._v(" "),a("div",{staticClass:"list"},e._l(e.form.sProperties,function(t,s){return a("div",{key:s,staticClass:"item"},[a("span",{staticClass:"name"},[e._v(e._s(t.traitType))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(t.value))])])}),0)],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{prop:"sDescription"}},[a("div",{staticClass:"form-item-header"},[a("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_26"))+" *")]),e._v(" "),a("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_13")))])]),e._v(" "),a("VueUeditorWrap",{attrs:{destroy:!0,config:e.myConfig},model:{value:e.form.sDescription,callback:function(t){e.$set(e.form,"sDescription",t)},expression:"form.sDescription"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item-footer"},[e.form.iItemId?[a("el-button",{staticClass:"form-btn edit",attrs:{loading:e.isloading},on:{click:e.handleReEdit}},[e._v(e._s(e.$t("message.Accounts_29"))+"\n          ")]),e._v(" "),a("el-button",{staticClass:"form-btn delete",on:{click:e.handleDelete}},[e._v(e._s(e.$t("message.Other_24")))])]:a("el-button",{staticClass:"form-btn create",attrs:{loading:e.isloading},on:{click:e.handleCreate}},[e._v(e._s(e.$t("message.Other_25"))+"\n        ")])],2)],1)],1):e._e(),e._v(" "),a("collectionSuccess",{attrs:{form:e.form},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}}),e._v(" "),a("el-dialog",{attrs:{"visible-arrow":!1,title:e.$t("message.assets_lang_160"),width:"581","popper-class":"market-pop",visible:e.propertiesVisible,content:" "},on:{"update:visible":function(t){e.propertiesVisible=t}}},[a("div",[a("div",{staticClass:"desc"},[e._v(e._s(e.$t("message.assets_lang_155")))]),e._v(" "),a("div",{staticClass:"form-page-box form-page-box1"},[a("div",{staticClass:"title"},[a("span",{staticClass:"txt1"},[e._v(e._s(e.$t("message.assets_lang_156")))]),a("span",{staticClass:"txt2"},[e._v(e._s(e.$t("message.assets_lang_157")))])]),e._v(" "),e._l(e.propertiestemp,function(t,s){return a("div",{key:s,staticClass:"property-item"},[a("el-input",{staticClass:"option",attrs:{maxlength:"14"},model:{value:t.traitType,callback:function(s){e.$set(t,"traitType",s)},expression:"item.traitType"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.deleteProperty(s)}}})])],2),e._v(" "),a("el-input",{staticClass:"option",attrs:{maxlength:"14"},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})],1)}),e._v(" "),a("el-button",{staticClass:"add",on:{click:e.addProperty}},[e._v(e._s(e.$t("message.assets_lang_158")))])],2),e._v(" "),a("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:e.onSave}},[e._v(e._s(e.$t("message.assets_lang_159")))])],1)])],1)},staticRenderFns:[]};var g=s("VU/8")(d,v,!1,function(e){s("B3w+")},"data-v-4ac58ff1",null);t.default=g.exports},vOav:function(e,t,s){"use strict";var a=s("QxMA"),i={name:"collectionSuccess",props:{value:{type:Boolean,default:!1},form:{type:Object,default:function(){}}},components:{iMedia:a.a},data:function(){return{isShow:this.value}},watch:{value:function(e){this.isShow=e}},methods:{handleCreateItem:function(){this.$router.replace({path:"assets/"+this.form.sContractAddress+"/"+this.form.sTokenId}),this.$emit("input",!1)},onClosed:function(){this.$emit("input",!1),this.$router.go(-1)}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"append-to-body":"",width:"500px",visible:e.isShow,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.isShow=t}}},[s("div",{staticClass:"dialog-success"},[s("i",{staticClass:"dialog-close el-icon-close",on:{click:e.onClosed}}),e._v(" "),s("i",{staticClass:"dialog-success-icon el-icon-success"}),e._v(" "),s("h1",{staticClass:"dialog-success-title"},[s("b",{staticStyle:{"margin-right":"3px"}},[e._v(e._s(e.form.sName))]),e._v(e._s(e.$t("message.Other_27")))]),e._v(" "),s("iMedia",{staticClass:"dialog-success-img",attrs:{url:e.form.sDataUrl}}),e._v(" "),s("el-button",{staticClass:"dialog-success-btn",on:{click:e.handleCreateItem}},[e._v(e._s(e.$t("message.Other_28")))])],1)])},staticRenderFns:[]};var o=s("VU/8")(i,r,!1,function(e){s("EuJO")},"data-v-e2c5ac8e",null);t.a=o.exports}});