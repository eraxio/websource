webpackJsonp([32],{"1eYv":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("TIfe"),n=a("NYxO");function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function s(n,r){try{var i=t[n](r),o=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(o).then(function(e){s("next",e)},function(e){s("throw",e)});e(o)}("next")})}}var i={data:function(){return{email:"",eye1:!1,eye2:!1,word1:"",word2:"",code:"",daley:0,deleyTimeId:null,inviteCode:"",gift:"100",regesterSuc:!0,isError:!1,captcha:{}}},computed:(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e})({},Object(n.c)({queryChainInfo:function(e){return e.app.queryChainInfo},sSessionKey:function(e){return e.app.sSessionKey}}),{btnDisable:function(){var e=new RegExp("^[a-zA-Z0-9]+([._\\-]*[A-Za-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),t=new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$");return!this.email||!e.test(this.email)||(!t.test(this.word1)||(this.word1!=this.word2||(!this.code||6!=this.code.length)))}}),mounted:function(){},methods:{onClose:function(){this.regesterSuc=!0,this.$router.replace("/main")},onBlur:function(){new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$").test(this.word1)?this.isError=!1:this.isError=!0},userRegister:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a,n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ethereum.request({method:"eth_requestAccounts"});case 2:return a=t.sent,n=a[0],s.a.setToken(e.sSessionKey),t.next=7,e.$api.EmailVerify({iSource:1,sEmail:e.email,sNewEmailVerifyCode:e.code,sPassword:e.word1}).catch(function(){s.a.setToken(""),e.getCaptcha()});case 7:if((r=t.sent)&&!(!r.iRspCode<0)){t.next=10;break}return t.abrupt("return");case 10:return localStorage.setItem("Email",e.email),t.next=13,e.$api.GetUserExten({sAddress:n});case 13:i=t.sent,(o=i.stUserExtenInfo).owner=!0,e.$store.dispatch("user/GET_USERINFO",o||{}),e.$nextTick(function(){e.$router.replace("/index")});case 18:case"end":return t.stop()}},t,e)}))()},showPassword2:function(){this.eye2=!this.eye2},toRouter:function(){},getCaptcha:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.GetCaptcha({iVerifyBusi:7});case 2:a=t.sent,e.captcha=a,console.log(a);case 5:case"end":return t.stop()}},t,e)}))()},getCode:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.regesterSuc){t.next=2;break}return t.abrupt("return");case 2:if(e.regesterSuc=!1,a=new RegExp("^[a-zA-Z0-9]+([._\\-]*[A-Za-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),e.email&&a.test(e.email)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.$api.CheckRegistered({iRegisterType:2,sEmail:e.email});case 8:return t.next=10,e.$api.SendEmailVerifyCode({iSource:1,iSendMethod:2,iVerifyBusi:7,sEmail:e.email});case 10:e.daley=60,clearInterval(e.deleyTimeId),e.deleyTimeId=setInterval(function(){e.daley--,e.daley<=0&&clearInterval(e.deleyTimeId)},1e3),e.regesterSuc=!0;case 14:case"end":return t.stop()}},t,e)}))()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sign-bind-email"},[a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("message.email_account_6")))]),e._v(" "),a("div",{staticClass:"title1"},[e._v(e._s(e.$t("message.email_account_2"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{placeholder:e.$t("message.email_account_2")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_15"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{maxlength:"6",placeholder:e.$t("message.email_account_7")},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[a("template",{slot:"append"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.daley,expression:"!daley"}],staticClass:"send",on:{click:e.getCode}},[e._v(e._s(e.$t("message.email_account_12")))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.daley,expression:"daley"}],staticClass:"send"},[e._v(e._s(e.daley)+"s")])])],2),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_14"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_8"),type:e.eye1?"text":"password"},on:{blur:e.onBlur},model:{value:e.word1,callback:function(t){e.word1=t},expression:"word1"}},[a("template",{slot:"append"},[e.eye1?a("i",{staticClass:"fas fa-eye",on:{click:function(t){e.eye1=!e.eye1}}}):a("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.eye1=!e.eye1}}})])],2),e._v(" "),a("div",{staticClass:"error-tips"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isError,expression:"isError"}]},[e._v(e._s(e.$t("message.email_account_28")))])]),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_29"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_8"),type:e.eye2?"text":"password"},model:{value:e.word2,callback:function(t){e.word2=t},expression:"word2"}},[a("template",{slot:"append"},[e.eye2?a("i",{staticClass:"fas fa-eye",on:{click:function(t){e.eye2=!e.eye2}}}):a("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.eye2=!e.eye2}}})])],2),e._v(" "),a("el-button",{staticClass:"o-login",attrs:{round:"",size:"large",disabled:e.btnDisable},on:{click:e.userRegister}},[e._v(e._s(e.$t("message.email_account_30"))+"\n    ")]),e._v(" "),a("div",{staticClass:"tips"},[e._v("\n      "+e._s(e.$t("message.email_account_10"))),a("span",{staticClass:"link",on:{click:e.toRouter}},[e._v(e._s(e.$t("message.email_account_11")))])])],1)])},staticRenderFns:[]};var c=a("VU/8")(i,o,!1,function(e){a("ytoN")},"data-v-562446a4",null);t.default=c.exports},ytoN:function(e,t){}});