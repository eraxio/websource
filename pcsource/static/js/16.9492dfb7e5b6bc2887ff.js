webpackJsonp([16],{GnaR:function(e,t){},seP7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("pXgp"),a=s("WnJJ"),i=s("Pgpu"),o=s.n(i),n=s("NYxO"),c=s("JrLM"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function r(a,i){try{var o=t[a](i),n=o.value}catch(e){return void s(e)}if(!o.done)return Promise.resolve(n).then(function(e){r("next",e)},function(e){r("throw",e)});e(n)}("next")})}}var u={name:"shopEdit",components:{ElUploader:a.a,VueUeditorWrap:o.a},data:function(){return{fileUrl:r.a,rules:this.getRules(),form:{},vLinks:{},eraxDictData:[],eraxDictDatas:{},myConfig:this.$store.state.app.ueditorConfig}},computed:l({},Object(n.b)(["token"])),mounted:function(){var e=this;return m(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.eraxGetDictData();case 2:return t.next=4,e.getCollectionsDetail();case 4:case"end":return t.stop()}},t,e)}))()},methods:{getCollectionsDetail:function(){var e=this;return m(regeneratorRuntime.mark(function t(){var s,r,a,i,o,n,c,m,u,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={iUserId:1002,iCollectionId:+e.$route.query.iCollectionId,sWallet:e.token},t.next=3,e.$api.GetCollectionDetail(s);case 3:if(r=t.sent,!(a=r.stCollection)){t.next=29;break}for(e.form=l({},a,{iCategory:parseInt(a.stCategory.sDictValue)}),i={},o=!0,n=!1,c=void 0,t.prev=11,m=a.vLinks[Symbol.iterator]();!(o=(u=m.next()).done);o=!0)f=u.value,i[f.skey]=f.sUrl;t.next=19;break;case 15:t.prev=15,t.t0=t.catch(11),n=!0,c=t.t0;case 19:t.prev=19,t.prev=20,!o&&m.return&&m.return();case 22:if(t.prev=22,!n){t.next=25;break}throw c;case 25:return t.finish(22);case 26:return t.finish(19);case 27:e.vLinks=i,e.$nextTick(function(){e.$refs.form.clearValidate()});case 29:case"end":return t.stop()}},t,e,[[11,15,19,27],[20,,22,26]])}))()},eraxGetDictData:function(){var e=this;return m(regeneratorRuntime.mark(function t(){var s,r,a,i,o,n,c,m,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.GetDictData({iDictType:1});case 2:if(!(s=t.sent).vDictData){t.next=27;break}for(r=s.vDictData.map(function(e){return l({},e,{sDictText:"message."+(s.sDictType+e.iDictSort)})}),e.eraxDictData=r,a={},i=!0,o=!1,n=void 0,t.prev=10,c=r[Symbol.iterator]();!(i=(m=c.next()).done);i=!0)u=m.value,a[+u.sDictValue]=u;t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),o=!0,n=t.t0;case 18:t.prev=18,t.prev=19,!i&&c.return&&c.return();case 21:if(t.prev=21,!o){t.next=24;break}throw n;case 24:return t.finish(21);case 25:return t.finish(18);case 26:e.eraxDictDatas=a;case 27:case"end":return t.stop()}},t,e,[[10,14,18,26],[19,,21,25]])}))()},getRules:function(){return{sLogoImg:[{required:!0,message:this.$t("message.Collection_14"),trigger:["blur","change"]}],sCollectionName:[{required:!0,message:this.$t("message.Collection_13"),trigger:"blur"}],iCategory:[{type:"number",required:!0,message:this.$t("message.Collection_13"),trigger:["blur","change"]}],sUrl:[{required:!1,message:this.$t("message.Collection_13"),trigger:["blur","change"]},{pattern:/^[0-9a-z-_]+$/,message:this.$t("message.Collection_16"),trigger:"blur"}],sDescription:[{required:!0,message:this.$t("message.Collection_13"),trigger:["blur","change"]}]}},handleEdit:function(){var e=this;return m(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)();case 2:e.$refs.form.validate(function(){var t=m(regeneratorRuntime.mark(function t(s){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=6;break}return r=l({iUserId:1002},e.form,{sWallet:e.token}),t.next=4,e.$api.EditCollection(r);case 4:e.$message({type:"success",message:e.$t("message.Collection_15")}),e.$router.go(-1);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t,e)}))()},handleDelete:function(){var e=this;return m(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)();case 2:e.$confirm(e.$t("message.Collection_17"),e.$t("message.Collection_18"),{confirmButtonText:e.$t("message.Collection_19"),cancelButtonText:e.$t("message.assets_lang_11"),type:"warning"}).then(m(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.DeleteCollection({iUserId:1002,iCollectionId:e.form.iCollectionId,sWallet:e.token}).then(function(t){e.$message({type:"success",message:e.$t("message.Collection_21")}),e.$router.replace({name:"collectionsList"})}).catch(function(t){-4013===t.iRspCode&&e.$message.error(e.$t("message.Collection_22"))});case 2:case"end":return t.stop()}},t,e)})));case 3:case"end":return t.stop()}},t,e)}))()},handleSuccessLogo:function(e){this.$set(this.form,"sLogoImg",e),this.$refs.form.validateField("sLogoImg")},handleSuccessFeatured:function(e){this.$set(this.form,"sFeaturedImg",e),this.$refs.form.validateField("sFeaturedImg")},handleRemoveLogo:function(){this.$set(this.form,"sLogoImg","")},handleRemoveFeatured:function(){this.$set(this.form,"sFeaturedImg","")}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-edit"},[s("div",{staticClass:"erax-page-header"},[s("div",{staticClass:"erax-page-layout"},[s("a",{staticClass:"erax-back",on:{click:function(t){return e.$router.go(-1)}}},[s("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回")])])]),e._v(" "),s("div",{staticClass:"form-page-box"},[s("div",{staticClass:"header"},[s("h1",{staticClass:"header-title"},[e._v(e._s(e.$t("message.Other_19")))])]),e._v(" "),s("el-form",{ref:"form",staticClass:"edit-form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{staticClass:"form-item",attrs:{prop:"sLogoImg"}},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v("LOGO *")]),e._v(" "),s("h4",{staticClass:"form-item-des"},[e._v("("+e._s(e.$t("message.Accounts_43"))+": 350 x 350 )")])]),e._v(" "),s("div",{staticClass:"form-content"},[s("el-uploader",{attrs:{imgUrl:e.form.sLogoImg,onSuccess:e.handleSuccessLogo,onRemove:e.handleRemoveLogo}})],1)]),e._v(" "),s("el-form-item",{staticClass:"form-item"},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Accounts_22")))]),e._v(" "),s("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_14"))+"，"+e._s(e.$t("message.Accounts_43"))+": 1266 x 300。")])]),e._v(" "),s("div",{staticClass:"form-content"},[s("el-uploader",{attrs:{width:"250",height:"120",imgUrl:e.form.sFeaturedImg,onSuccess:e.handleSuccessFeatured,onRemove:e.handleRemoveFeatured}})],1)]),e._v(" "),s("el-form-item",{staticClass:"form-item",attrs:{prop:"sCollectionName"}},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Collections_09"))+" *")])]),e._v(" "),s("el-input",{attrs:{placeholder:"输入店铺名称，如：盒马动画原创动漫2021幅",maxlength:64},model:{value:e.form.sCollectionName,callback:function(t){e.$set(e.form,"sCollectionName",t)},expression:"form.sCollectionName"}})],1),e._v(" "),s("el-form-item",{staticClass:"form-item",attrs:{prop:"sUrl"}},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Collections_07")))]),e._v(" "),s("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_15")))])]),e._v(" "),s("el-input",{attrs:{maxlength:64},model:{value:e.form.sUrl,callback:function(t){e.$set(e.form,"sUrl",t)},expression:"form.sUrl"}},[s("template",{slot:"prepend"},[e._v("https://erax.io/assets/")])],2)],1),e._v(" "),s("el-form-item",{staticClass:"form-item",attrs:{prop:"sDescription"}},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Collections_08"))+" *")]),e._v(" "),s("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_13")))])]),e._v(" "),s("VueUeditorWrap",{attrs:{destroy:!0,config:e.myConfig},model:{value:e.form.sDescription,callback:function(t){e.$set(e.form,"sDescription",t)},expression:"form.sDescription"}})],1),e._v(" "),s("el-form-item",{staticClass:"form-item",attrs:{prop:"iCategory"}},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_05"))+" *")]),e._v(" "),s("h4",{staticClass:"form-item-des"},[e._v(e._s(e.$t("message.Other_16")))])]),e._v(" "),s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("message.assets_lang_74")},model:{value:e.form.iCategory,callback:function(t){e.$set(e.form,"iCategory",t)},expression:"form.iCategory"}},[e.form.iCategory||0===e.form.iCategory?s("img",{staticClass:"select-icon",attrs:{slot:"prefix",src:e.eraxDictDatas[e.form.iCategory].sDictIcon},slot:"prefix"}):e._e(),e._v(" "),e._l(e.eraxDictData,function(t){return s("el-option",{key:t.iDictSort,attrs:{label:e.$t(t.sDictText),value:t.iDictSort}},[s("p",{staticClass:"item-icon-select"},[s("img",{attrs:{src:t.sDictIcon}}),e._v(" "),s("span",[e._v(e._s(e.$t(t.sDictText)))])])])})],2)],1),e._v(" "),s("el-form-item",{staticClass:"form-item"},[s("div",{staticClass:"form-item-header"},[s("h4",{staticClass:"form-item-title"},[e._v(e._s(e.$t("message.Other_09")))])]),e._v(" "),s("div",{staticClass:"erax-input-group"},e._l(e.form.vLinks,function(t,r){return s("el-input",{key:t.sKey,attrs:{maxlength:200},model:{value:e.form.vLinks[r].sUrl,callback:function(t){e.$set(e.form.vLinks[r],"sUrl",t)},expression:"form.vLinks[i].sUrl"}},[s("template",{slot:"prepend"},[s("i",{class:t.sIcon})])],2)}),1)])],1),e._v(" "),s("div",{staticClass:"form-item-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"form-btn edit",on:{click:e.handleEdit}},[e._v(e._s(e.$t("message.Accounts_29")))]),e._v(" "),s("el-button",{staticClass:"form-btn delete",on:{click:e.handleDelete}},[e._v(e._s(e.$t("message.Other_17")))])],1)],1)])},staticRenderFns:[]};var g=s("VU/8")(u,f,!1,function(e){s("GnaR")},"data-v-6ef15ee7",null);t.default=g.exports}});