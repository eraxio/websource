webpackJsonp([41],{Hw0K:function(e,t){},JPfB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("TIfe"),a=(s("yzkn"),s("ytf2")),i=s("bSIt"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};var r={data:function(){return{showPsw:!1,oLogin:{}}},computed:o({},Object(i.c)({queryChainInfo:function(e){return e.app.queryChainInfo},sSessionKey:function(e){return e.app.sSessionKey}}),{btnDisable:function(){var e=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");return!this.oLogin.sEmail||!e.test(this.oLogin.sEmail)||!this.oLogin.sPassword}}),methods:{handleLogin:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var s,i,r,c,u,l,f,d,p,h,m,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=o({},t.oLogin,{iSource:1,iLoginType:2}),e.next=3,t.$api.UserLogin(s);case 3:return i=e.sent,r=i.sSessionKey,e.next=7,ethereum.request({method:"eth_requestAccounts"});case 7:return c=e.sent,u=c[0],e.next=11,t.$api.QueryChainInfo({sChain:"Ethereum",sAddress:u});case 11:return l=e.sent,f=l.sNonce,d=l.sChain,Object(a.b)(),e.next=17,web3.eth.personal.sign(f,u,function(e,t){if(e)return!1});case 17:return p=e.sent,n.a.setToken(r),e.next=21,t.$api.UserBindChain({sChain:d,sAddress:u,sSignature:p,iSource:1}).catch(function(e){n.a.setToken("")});case 21:if((h=e.sent)&&!(!h.iRspCode<0)){e.next=24;break}return e.abrupt("return");case 24:return localStorage.setItem("Email",t.oLogin.sEmail),n.a.setToken(r),e.next=28,t.$api.GetUserExten({sAddress:u});case 28:m=e.sent,(_=m.stUserExtenInfo).owner=!0,t.$store.dispatch("user/GET_USERINFO",_||{}),t.$message.success(t.$t("message.email_account_27")),t.$nextTick(function(){t.$router.replace("/")});case 34:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function n(a,i){try{var o=t[a](i),r=o.value}catch(e){return void s(e)}if(!o.done)return Promise.resolve(r).then(function(e){n("next",e)},function(e){n("throw",e)});e(r)}("next")})})()}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-email"},[s("div",{staticClass:"container"},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("message.email_account_4")))]),e._v(" "),s("div",{staticClass:"title1"},[e._v(e._s(e.$t("message.email_account_1")))]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{placeholder:e.$t("message.email_account_2")},model:{value:e.oLogin.sEmail,callback:function(t){e.$set(e.oLogin,"sEmail",t)},expression:"oLogin.sEmail"}}),e._v(" "),s("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_14")))]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_3"),type:e.showPsw?"text":"password"},model:{value:e.oLogin.sPassword,callback:function(t){e.$set(e.oLogin,"sPassword",t)},expression:"oLogin.sPassword"}},[s("template",{slot:"append"},[e.showPsw?s("i",{staticClass:"fas fa-eye",on:{click:function(t){e.showPsw=!e.showPsw}}}):s("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.showPsw=!e.showPsw}}})])],2),e._v(" "),s("el-button",{staticClass:"o-login",attrs:{round:"",size:"large",disabled:e.btnDisable},on:{click:e.handleLogin}},[e._v(e._s(e.$t("message.email_account_26"))+"\n    ")]),e._v(" "),s("div",{staticClass:"tips",on:{click:function(t){return e.$router.push("/signup")}}},[e._v(e._s(e.$t("message.email_account_6")))])],1)])},staticRenderFns:[]};var u=s("C7Lr")(r,c,!1,function(e){s("Hw0K")},"data-v-1753c21a",null);t.default=u.exports}});